<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<style>
  .card {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 20px;
    max-width: 100%; 
    width: 100%;
     height: 400px;
}


</style>

<body class="bg-gray-100 p-8">
    <div class="flex justify-center ml-16 mt-16"> <!-- Adjust mt-16 for desired spacing -->
        <!-- Input Form -->
        <div class="w-1/2 pr-4 ml-16">
            <h1 class="text-3xl font-bold mb-6 ml-16">QR Code Generator</h1>
            <form action="/submit" method="POST" class="flex flex-col space-y-4 max-w-md">
                <input type="text" name="link" placeholder="Put the link in here!" class="border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:border-blue-500">
                <input type="submit" value="Generate Link" class="bg-blue-500 text-white px-4 py-2 rounded-md cursor-pointer hover:bg-blue-600 transition duration-300">
            </form>
        </div>

        <!-- Generated QR Code -->
      
          <!-- Card -->
      
         
       
      
            <% if (file) { %>
              <div class="w-1/2 pl-4  mr-12">
                <h1 class="text-3xl font-bold mb-6 ml-16 pl-24">Generated QR Code</h1>
                 <!-- Card -->
                 <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center">
                  <img src="/<%= file %>" alt="QR Code" id="qrCodeImage" style="max-width: 300px; width: 100%; height: auto;" class="max-w-md mx-auto rounded-lg m-4 shadow-md">
                  <p class="text-xl font-bold m-8 text-center" id="namaImg"><%= data %></p>
              </div>
                <button onclick="downloadImage()" class="block text-center bg-blue-500 text-white px-4 py-2 mx-auto rounded-md mt-4 hover:bg-blue-600 transition duration-300">
                    Save Image
                </button>
                <a href="/" class="block text-center bg-blue-500 text-white px-4 py-2 rounded-md mt-4 max-w-xs mx-auto hover:bg-blue-600 transition duration-300">
                  Go Back
              </a>
            </div>
            <% } else { %>
              <div class="w-1/2 pl-4 mr-16">
                <h1 class="text-3xl font-bold mb-6 ml-16 pl-24">Generated QR Code</h1>
              <div class="card">
                <div class="card-content">

                </div>
              </div>
            </div>
          <%  } %>
        </div>
    </div>

    <script>
       function downloadImage() {
  const qrCodeImage = document.getElementById('qrCodeImage');
  const imageURL = qrCodeImage.src;
  const fileName = imageURL.split('/').pop();
  const data = document.getElementById('namaImg').value; // Ambil nilai nama asli dari file

  window.location.href = `/download/${fileName}?filename=${data}`;
}

    </script>
</body>
</html>
